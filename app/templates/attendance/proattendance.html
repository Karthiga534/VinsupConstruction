{% extends "base.html" %}
{% load static %}
{% block header2 %}

<div id="layout-wrapper">
  <div class="main-content">
    <div class="page-content">
      <div class="container-fluid">
        <!-- start page title -->
        <div class="row">
          <div class="col-12">
            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
              <h4 class="mb-sm-0">Sub Contract Attendance report</h4>
              <div class="page-title-right">
                <ol class="breadcrumb m-0">
                  <li class="breadcrumb-item">
                    <a href="javascript: void(0);">Dashboard</a>
                  </li>
                  <li class="breadcrumb-item active">Attendance Report</li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      
        <div class="row">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header">
                <div class="row">
                  <div class="col-xl-6 col-lg-6 col-md-6 col-12">
                    <h4>Sub Contract Attendance</h4>
                  </div>
                  <div class="col-xl-4 col-lg-4 col-md-4 col-12"></div>
                  <div class="col-xl-2 col-lg-2 col-md-2 col-12">
                    <button type="button" class="btn btn-info" style="float: right" data-bs-toggle="modal"
                      data-bs-target=".bs-example-modal-lg">
                      Add Attendance
                    </button>
                    <div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog"
                      aria-labelledby="myLargeModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="myLargeModalLabel">
                              Add Attendance
                            </h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <hr />
                          <form id="createForm" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="modal-body">
                              <div class="row">
                                
                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Select Date :</label>
                                  <input type="date" class="form-control" id="date" name="date" />
                                  <span class="error-message" id="dateError"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Project Sub Contract :</label>
                                  <select class="form-select mb-3" aria-label="Default select example" id="contract"
                                    name="contract">
                                    <option value=""> --------------------- </option>
                                    {% for i in projectsubcontract %}
                                    <option value="{{ i.id }}"> {{ i.display_contractor_dropdown }} </option>
                                    {% endfor %}
                                  </select>
                                  <span id="contractError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Maistry :</label>
                                  <input type="text" class="form-control" id="maistry" name="maistry" />
                                  <span class="error-message" id="maistryError"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Maison :</label>
                                  <input type="text" class="form-control" id="maison_cooli" name="maison_cooli" />
                                  <span id="maison_cooliError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Male Skilled :</label>
                                  <input type="text" class="form-control" id="male_skilled" name="male_skilled" />
                                  <span id="male_skilledError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Male Unskilled</label>
                                  <input type="text" class="form-control" id="male_unskilled" name="male_unskilled" />
                                  <span id="male_unskilledError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Female Skilled :</label>
                                  <input type="text" class="form-control" id="female_skilled" name="female_skilled" />
                                  <span id="female_skilledError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Female Unskilled :</label>
                                  <input type="text" class="form-control" id="female_unskilled"
                                    name="female_unskilled" />
                                  <span id="female_unskilledError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Maistry OT :</label>
                                  <input type="text" class="form-control" id="maistry_ot" name="maistry_ot" />
                                  <span id="maistry_otError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Maison Cooli OT :</label>
                                  <input type="text" class="form-control" id="maison_cooli_ot" name="maison_cooli_ot" />
                                  <span id="maison_cooli_otError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Male Skilled OT :</label>
                                  <input type="text" class="form-control" id="male_skilled_ot" name="male_skilled_ot" />
                                  <span id="male_skilled_otError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Male Unskilled OT :</label>
                                  <input type="text" class="form-control" id="male_unskilled_ot"
                                    name="male_unskilled_ot" />
                                  <span id="male_unskilled_otError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Female Skilled OT :</label>
                                  <input type="text" class="form-control" id="female_skilled_ot"
                                    name="female_skilled_ot" />
                                  <span id="female_skilled_otError" class="error-message"></span>
                                </div>

                                <div class="col-lg-4 col-md-4 col-xs-6 col-12">
                                  <label for="" class="form-label mt-2">Female Unskilled OT :</label>
                                  <input type="text" class="form-control" id="female_unskilled_ot"
                                    name="female_unskilled_ot" />
                                  <span id="female_unskilled_otError" class="error-message"></span>
                                </div>
                              </div>
                            </div>
                            <hr />

                            <div class="modal-footer">
                              <button class="btn btn-link link-success fw-medium shadow-none" data-bs-dismiss="modal"
                                onclick="clearErrors()">
                                <i class="ri-close-line me-1 align-middle"></i>
                                Close
                              </button>
                              <button type="button" class="btn btn-primary" onclick="createFunction(this)">
                                Save
                              </button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>







              <div class="card-body">
                <div class="row">
                  <div class="col-xl-3 col-lg-3 col-md-3 col-xs-6 col-12">
                    <label for="" class="form-label">Project Sub Contract :</label>
                    <select class="form-select mb-3" aria-label="Default select example" id="project">

                      <option value="0"> ------------ </option>
                      {% for i in projectsubcontract %}
                      <option value="{{i.id}}"> {{i.display}} </option>
                      {% endfor %}
                    </select>
                  </div>

                  <div class="col-xl-3 col-lg-3 col-md-3 col-xs-6 col-12">
                    <label for="" class="form-label">Contractor Name:</label>
                    <select class="form-select mb-3" aria-label="Default select example" id="contractor">

                      <option value="0"> ------------ </option>
                      {% for i in contractor %}
                      <option value="{{i.id}}"> {{i.display}} </option>
                      {% endfor %}
                    </select>
                  </div>

                  <div class="col-xl-2 col-lg-2 col-md-2 col-xs-6 col-12">
                    <label for="exampleInputdate" class="form-label">From Date</label>
                    <input type="date" class="form-control" id="fromdate" />
                  </div>

                  <div class="col-xl-2 col-lg-2 col-md-2 col-xs-6 col-12">
                    <label for="exampleInputdate" class="form-label">To Date</label>
                    <input type="date" class="form-control" id="todate" />
                  </div>

                  <div class="col-xl-3 col-lg-3 col-md-3 col-xs-6 col-12">
                    <br /><button type="button" class="btn btn-primary waves-effect waves-light mt-2">
                      Get Report
                    </button>
                  </div>
                </div>
                <hr />
                <table id="example" class="table table-bordered dt-responsive nowrap table-striped align-middle"
                  style="width: 100%">
                  <thead>
                    <tr>
                      <th data-ordering="false">SR No.</th>
                      <th data-ordering="false">Date</th>

                      <th data-ordering="false">Contractor Name</th>
                      <th data-ordering="false">Maistry</th>
                      <th data-ordering="false">Maison cooli</th>
                      <th data-ordering="false">Male Skilled</th>
                      <th data-ordering="false">Male Unskilled</th>
                      <th data-ordering="false">Female Skilled</th>
                      <th data-ordering="false">Female Unskilled</th>
                      <th data-ordering="false">Action</th>
                    </tr>
                  </thead>
                  <tbody id='modalTableBody'>
                    {% comment %}

                    <tr>
                      <td>{{ forloop.counter }}</td>
                      <td>{{ i.date }}</td>
                      <td>{{ i.contract }}</td>
                      <td>{{ i.maistry }}</td>
                      <td>{{ i.maison_cooli }}</td>
                      <td>{{ i.male_skilled }}</td>
                      <td>{{ i.male_unskilled }}</td>

                      <td>{{ i.female_skilled }}</td>
                      <td>{{ i.female_unskilled }}</td>
                      <td>
                        <div class="dropdown d-inline-block">
                          <button class="btn btn-soft-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            <i class="ri-more-fill align-middle"></i>
                          </button>
                          <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                              <a class="dropdown-item" data-id="{{i.id}}"
                                onclick="openModal('viewModal', '{{ i.id }}')"><i
                                  class="ri-eye-fill align-bottom me-2 text-muted"></i>
                                View</a>
                            </li>
                            <li>
                              <a class="dropdown-item edit-item-btn" data-bs-toggle="modal" href="#!"
                                onclick="openModal('editModal','{{ i.id }}')">
                                <i class="ri-pencil-fill align-bottom me-2 text-muted"></i>
                                Edit</a>
                            </li>
                            <li>
                              <a class="dropdown-item remove-item-btn del-btn" href="#!"
                                data-target="#deleteModal{{ i.id}}">
                                <i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
                                Delete
                              </a>
                            </li>
                          </ul>
                        </div>
                      </td>

                      <div class="modal fade" id="viewModal_{{i.id}}" tabindex="-1" role="dialog"
                        aria-labelledby="viewModalLabel" aria-hidden="true" data-bs-backdrop="static"
                        data-bs-keyboard="false">
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="viewModalLabel">
                                View Project
                              </h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                onclick="CloseModel('viewModal', '{{i.id}}')"></button>
                            </div>

                            <div class="modal-body">
                              <div class="row">


                                <div class="col-md-6">
                                  <label for="{{i.id}}_date" class="form-label">Date:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_date" name="date"
                                    value="{{i.date}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_contract" class="form-label">Contractor Name:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_contract" name="contract"
                                    value="{{i.contract}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_maistry" class="form-label">Maistry:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_maistry" name="maistry"
                                    value="{{i.maistry}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_maison_cooli" class="form-label">Maison Cooli:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_maison_cooli" name="maison_cooli"
                                    value="{{i.maison_cooli}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_male_skilled" class="form-label">Male Skilled:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_male_skilled" name="male_skilled"
                                    value="{{i.male_skilled}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_male_unskilled" class="form-label">Male Unskilled:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_male_unskilled"
                                    name="male_unskilled" value="{{i.male_unskilled}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_female_skilled" class="form-label">Female Skilled:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_female_skilled"
                                    name="female_skilled" value="{{i.female_skilled}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_female_unskilled" class="form-label">Female Unskilled:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_female_unskilled"
                                    name="female_unskilled" value="{{i.female_unskilled}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_maistry_ot" class="form-label">Maistry OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_maistry_ot" name="maistry_ot"
                                    value="{{i.maistry_ot}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_maison_cooli_ot" class="form-label">Maison Cooli OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_maison_cooli_ot"
                                    name="maison_cooli_ot" value="{{i.maison_cooli_ot}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_male_skilled_ot" class="form-label">Male Skilled OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_male_skilled_ot"
                                    name="male_skilled_ot" value="{{i.male_skilled_ot}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_male_unskilled_ot" class="form-label">Male Unskilled OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_male_unskilled_ot"
                                    name="male_unskilled_ot" value="{{i.male_unskilled_ot}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_female_skilled_ot" class="form-label">Female Skilled OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_female_skilled_ot"
                                    name="female_skilled_ot" value="{{i.female_skilled_ot}}" readonly />
                                </div>

                                <div class="col-md-6">
                                  <label for="{{i.id}}_female_unskilled_ot" class="form-label">Female Unskilled
                                    OT:</label>
                                  <input type="text" class="form-control" id="{{i.id}}_female_unskilled_ot"
                                    name="female_unskilled_ot" value="{{i.female_unskilled_ot}}" readonly />
                                </div>
                              </div>
                            </div>

                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                                onclick="CloseModel('viewModal', '{{i.id}}')">
                                Close
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="modal fade" id="editModal_{{i.id}}" tabindex="-1" role="dialog"
                        aria-labelledby="editModalLabel" aria-hidden="true" data-bs-backdrop="static"
                        data-bs-keyboard="false">
                        <div class="modal-dialog modal-lg">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="editModalLabel">
                                Edit Project
                              </h5>

                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                                onclick="CloseModel('editModal','{{i.id}}')"></button>
                            </div>

                            <div class="modal-body">
                              <div class="row" id="editForm{{ i.id}}">

                                {% comment %} <form id="editForm{{ i.id}}"> {% endcomment %}


                                  <!-- <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_contract"
                                      class="form-label"
                                      >Contractor Name:</label
                                    >
                                    <select
                                      class="form-select"
                                      aria-label="Default select example"
                                      id="{{i.id}}_contract"
                                      name="contract"
                                    >
                                      <option
                                        value="{{i.contract.id}}"
                                        selected
                                      >
                                        {{i.contract.contractor}}
                                      </option>
                                      {% for j in projectsubcontract %}
                                      <option value="{{j.id}}">
                                        {{j.contractor}}
                                      </option>
                                      {% endfor %}
                                    </select>
                                    <span
                                      id="{{i.id}}_contractError"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label for="edit_maistry" class="form-label"
                                      >Maistry:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_maistry"
                                      name="maistry"
                                      value="{{i.maistry}}"
                                    />
                                    <span
                                      id="{{i.id}}_maistry"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_maison_cooli"
                                      class="form-label"
                                      >Maison Cooli:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_maison_cooli"
                                      name="maison_cooli"
                                      value="{{i.maison_cooli}}"
                                    />
                                    <span
                                      id="{{i.id}}_maison_cooliError"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_male_skilled"
                                      class="form-label"
                                      >Male Skilled:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_male_skilled"
                                      name="male_skilled"
                                      value="{{i.male_skilled}}"
                                    />
                                    <span
                                      id="{{i.id}}_male_skilledError"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_male_unskilled"
                                      class="form-label"
                                      >Male Unskilled:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_male_unskilled"
                                      name="male_unskilled"
                                      value="{{i.male_unskilled}}"
                                    />
                                    <span
                                      id="{{i.id}}_male_unskilled"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_female_skilled"
                                      class="form-label"
                                      >Female Skilled:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_female_skilled"
                                      name="female_skilled"
                                      value="{{i.female_skilled}}"
                                    />
                                    <span
                                      id="{{i.id}}_female_skilled"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_female_unskilled"
                                      class="form-label"
                                      >Female Unskilled:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_female_unskilled"
                                      name="female_unskilled"
                                      value="{{i.female_unskilled}}"
                                    />
                                    <span
                                      id="{{i.id}}_female_unskilled"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_maistry_ot"
                                      class="form-label"
                                      >Maistry OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_maistry_ot"
                                      name="maistry_ot"
                                      value="{{i.maistry_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_maistry_ot"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_maison_cooli_ot"
                                      class="form-label"
                                      >Maison Cooli OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_maison_cooli_ot"
                                      name="maison_cooli_ot"
                                      value="{{i.maison_cooli_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_maison_cooli_ot"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_male_unskilled_ot"
                                      class="form-label"
                                      >Male Skilled OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_male_skilled_ot"
                                      name="male_skilled_ot"
                                      value="{{i.male_skilled_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_male_skilled_ot"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_male_unskilled_ot"
                                      class="form-label"
                                      >Male Unskilled OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_male_unskilled_ot"
                                      name="male_unskilled_ot"
                                      value="{{i.male_unskilled_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_male_unskilled_ot"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_female_skilled_ot"
                                      class="form-label"
                                      >Female Skilled OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_female_skilled_ot"
                                      name="female_skilled_ot"
                                      value="{{i.female_skilled_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_female_skilled_ot"
                                      class="error-message"
                                    ></span>
                                  </div>

                                  <div class="col-md-6 mb-3">
                                    <label
                                      for="edit_female_unskilled_ot"
                                      class="form-label"
                                      >Female Unskilled OT:</label
                                    >
                                    <input
                                      type="text"
                                      class="form-control"
                                      id="{{i.id}}_female_unskilled_ot"
                                      name="female_unskilled_ot"
                                      value="{{i.female_unskilled_ot}}"
                                    />
                                    <span
                                      id="{{i.id}}_female_unskilled_ot"
                                      class="error-message"
                                    ></span>
                                  </div>
                                {% comment %} </form> {% endcomment %}
                              </div>

                              <div class="modal-footer">
                                <button
                                  type="button"
                                  class="btn btn-secondary"
                                  id=""
                                  data-bs-dismiss="modal"
                                  onclick="CloseModel('editModal','{{i.id}}')"
                                >
                                  Cancel
                                </button>
                                <button
                                  type="button"
                                  class="btn btn-primary"
                                  id="saveuom"
                                  onclick="updateFunction(this,'{{i.id}}')"
                                >
                                  Save
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                     for delete

                      <div
                        class="modal fade"
                        id="deleteModal{{ i.id}}"
                        tabindex="-1"
                        aria-labelledby="deleteModalLabel-{{ forloop.counter }}"
                        aria-hidden="true"
                      >
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5
                                class="modal-title"
                                id="deleteModalLabel-{{ forloop.counter }}"
                              >
                                Delete Attendance Report
                              </h5>
                              <button
                                type="button"
                                class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="Close"
                              ></button>
                            </div>

                            <div class="modal-body">
                              <p>
                                Are you sure you want to delete "{{ i.contract
                                }}"?
                              </p>
                            </div>

                            <div class="modal-footer">
                              <button
                                type="button"
                                class="btn btn-secondary"
                                data-bs-dismiss="modal"
                              >
                                Cancel
                              </button>
                              <button
                                type="button"
                                onclick="deleteFunction(this,'{{i.id}}')"
                                class="btn btn-danger"
                              >
                                Delete
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </tr>

                 -->
                  </tbody>
                </table>

                <div id="pagination-container"></div>

              </div>








            </div>
          </div>
        </div>
        <!-- container-fluid -->
      </div>
      <!-- End Page-content -->
    </div>
    <!-- end main content-->
  </div>
  <!-- END layout-wrapper -->
</div>



<!--  make custom data model -->

<div class="modal fade bs-example-modal-lg" tabindex="-1" role="document" aria-labelledby="myLargeModalLabel"
  id="attendanceHistoryModal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"  id="modalHeader" >Sub Contractor Attendance </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
        </button>
      </div>
      <hr>
      <form id="editForm">

        <div class="modal-body">
          <div class="row">

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2">Contractor Name :</label>
              <input type="text" class="form-control" id="Vcontract" name="contract" readonly>
            </div>


            <input type="text" class="form-control" id="VcontractHidden" name="contractHidden" readonly hidden>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Date:</label>
              <input type="date" class="form-control" id="Vdate" name="date" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2">  Maistry:</label>
              <input type="number" class="form-control" id="Vmaistry" name="maistry" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Maison Cooli:</label>
              <input type="number" class="form-control" id="Vmaison_cooli" name="maison_cooli" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Male Skilled:</label>
              <input type="number" class="form-control" id="Vmale_skilled" name="male_skilled" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Male Unskilled:</label>
              <input type="number" class="form-control" id="Vmale_unskilled" name="male_unskilled" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Female Skilled:</label>
              <input type="number" class="form-control" id="Vfemale_skilled" name="female_skilled" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Female Unskilled:</label>
              <input type="number" class="form-control" id="Vfemale_unskilled" name="female_unskilled" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Maistry OT:</label>
              <input type="number" class="form-control" id="Vmaistry_ot" name="maistry_ot" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Maison Cooli OT:</label>
              <input type="number" class="form-control" id="Vmaison_cooli_ot" name="maison_cooli_ot" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Male Skilled OT:</label>
              <input type="number" class="form-control" id="Vmale_skilled_ot" name="male_skilled_ot" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Male Unskilled OT:</label>
              <input type="number" class="form-control" id="male_unskilled_ot" name="male_unskilled_ot" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Female Skilled OT:</label>
              <input type="number" class="form-control" id="Vfemale_skilled_ot" name="female_skilled_ot" readonly>
            </div>

            <div class="col-lg-4 col-md-4 col-xs-6 col-12">
              <label for="" class="form-label mt-2"> Female Unskilled OT:</label>
              <input type="number" class="form-control" id="Vfemale_unskilled_ot" name="female_unskilled_ot" readonly>
            </div>

          </div>
        </div>



        <hr>
        <div class="modal-footer">
          <button type="button" class="btn btn-link link-success fw-medium shadow-none" data-bs-dismiss="modal"><i
              class="ri-close-line me-1 align-middle"></i> Close</button>


          <button type="button" class="btn btn-primary " id="editButton">Edit </button>

          <button type="button" class="btn btn-primary d-none" id="saveButton" onclick="updateFunction(this)">Save
          </button>

        </div>

      </form>
    </div>
  </div>
</div>



<button onclick="topFunction()" class="btn btn-danger btn-icon" id="back-to-top">
  <i class="ri-arrow-up-line"></i>
</button>

<div id="preloader">
  <div id="status">
    <div class="spinner-border text-primary avatar-sm" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</div>

<script>

  document.addEventListener("DOMContentLoaded", function () {
    const viewButtons = document.querySelectorAll(".view-btn");
    const editButtons = document.querySelectorAll(".edit-btn");
    const delButtons = document.querySelectorAll(".del-btn");

    viewButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const modalId = this.getAttribute("data-target");
        const modal = document.querySelector(modalId);
        if (modal) {
          $(modal).modal("show");
        }
      });
    });

    editButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const modalId = this.getAttribute("data-target");
        const modal = document.querySelector(modalId);
        if (modal) {
          $(modal).modal("show");
        }
      });
    });

    delButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const modalId = this.getAttribute("data-target");
        const modal = document.querySelector(modalId);
        if (modal) {
          $(modal).modal("show");
        }
      });
    });



  });

  // create form

  function createFunction(button) {
    var formId = `createForm`; //change
    var formElement = document.getElementById(formId);

    try {
      disableButton(button);
      var isValid = true;
      var errors = {};
      var formData = new FormData();

      var requiredKeys = ["date", "contract"];

      formData.append(
        "date",
        getValueOrDefault(formElement.querySelector('input[name="date"]').value)
      );
      formData.append(
        "contract",
        getValueOrDefault(
          formElement.querySelector('select[name="contract"]').value
        )
      );
      formData.append(
        "maistry",
        getValueOrDefault(
          formElement.querySelector('input[name="maistry"]').value
        )
      );
      formData.append(
        "maison_cooli",
        getValueOrDefault(
          formElement.querySelector('input[name="maison_cooli"]').value
        )
      );

      formData.append(
        "male_skilled",
        getValueOrDefault(
          formElement.querySelector('input[name="male_skilled"]').value
        )
      );
      formData.append(
        "male_unskilled",
        getValueOrDefault(
          formElement.querySelector('input[name="male_unskilled"]').value
        )
      );

      formData.append(
        "female_skilled",
        getValueOrDefault(
          formElement.querySelector('input[name="female_skilled"]').value
        )
      );
      formData.append(
        "female_unskilled",
        getValueOrDefault(
          formElement.querySelector('input[name="female_unskilled"]').value
        )
      );

      formData.append(
        "maistry_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="maistry_ot"]').value
        )
      );
      formData.append(
        "maison_cooli_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="maison_cooli_ot"]').value
        )
      );
      formData.append(
        "male_skilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="male_skilled_ot"]').value
        )
      );
      formData.append(
        "male_unskilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="male_unskilled_ot"]').value
        )
      );
      formData.append(
        "female_skilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="female_skilled_ot"]').value
        )
      );
      formData.append(
        "female_unskilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="female_unskilled_ot"]').value
        )
      );

      requiredKeys.forEach(function (key) {
        var value = formData.get(key);
        if (!value.trim()) {
          isValid = false;
          errors[key] = ["This field may not be blank."];
        }
      });

      if (!isValid) {
        enableButton(button);
        console.log(errors);
        handleCreateErrors(errors);
        return;
      } else {
        $(`#${formId} input, #${formId} button`).prop("disabled", true);
      }

      $.ajax({
        url: "/add_attendance/", //change
        type: "POST",
        headers: {
          "X-CSRFToken": csrftoken,
        },
        data: formData,
        processData: false,
        contentType: false,
        success: function (response, status, xhr) {
          console.error(status);
          if (xhr.status === 201) {
            showToast(
              successMesssage?.message,
              "",
              successMesssage?.bgColor,
              true
            );
          } else {
            console.error(error);
            restoreForm(formId, button);
          }
        },
        error: function (xhr, status, error) {
          console.log(xhr, status, error);
          if (xhr.status === 400) {
            if (xhr?.responseJSON || xhr?.responseJSON?.errors) {
              showToast(
                errorAlertMessage?.message,
                "",
                errorAlertMessage?.bgColor
              );
              handleCreateErrors(transformErrors(xhr.responseJSON));
              restoreForm(formId, button);
            } else {
              showToast(
                errorAlertMessage?.message,
                "",
                errorAlertMessage?.bgColor
              );
              restoreForm(formId, button);
            }
          } else if (xhr.status === 401 || xhr.status === 404) {
            showToast(
              xhr?.responseJSON?.details,
              "",
              errorAlertMessage?.bgColor
            );
            restoreForm(formId, button);
          } else {
            showToast(
              errorAlertMessage?.message,
              "",
              errorAlertMessage?.bgColor
            );
            restoreForm(formId, button);
          }
        },
      });
    } catch (error) {
      showToast(errorOccured?.message, "", errorOccured?.bgColor);
      restoreForm(formId, button);
      console.error(error);
    }
  }

  // update

  function updateFunction(button) {

    const modalSelector = "attendanceHistoryModal"

    const saveId = button.getAttribute('data-id')
    console.log(saveId,typeof saveId,"ppppppppppppppppp",typeof 0)
    // var formId = `editForm${saveId}`; //change
    var formId = `editForm`
    var formElement = document.getElementById(formId);

    console.log(formElement);

    var isValid = true;
    var errors = {};

    try {
      disableButton(button);
      clearErrors();

      // var requiredKeys = ["maistry"]; //change

      const formData = new FormData();
      var requiredKeys;

      if (saveId === 0){
        requiredKeys = ["date", "contract"];
      }
      else{
        requiredKeys = ["date",];
      }
      

      formData.append(
        "date",
        getValueOrDefault(formElement.querySelector('input[name="date"]').value)
      );

      if (saveId== 0){
        formData.append(
        "contract",
        getValueOrDefault(
          formElement.querySelector('input[name="contractHidden"]').value
        )
      );
      }
    

      formData.append(
        "maistry",
        getValueOrDefault(
          formElement.querySelector('input[name="maistry"]').value
        )
      ); //change
      formData.append(
        "maison_cooli",
        getValueOrDefault(
          formElement.querySelector('input[name="maison_cooli"]').value
        )
      );
      formData.append(
        "male_skilled",
        getValueOrDefault(
          formElement.querySelector('input[name="male_skilled"]').value
        )
      );
      formData.append(
        "male_unskilled",
        getValueOrDefault(
          formElement.querySelector('input[name="male_unskilled"]').value
        )
      );

      // formData.append(
      //   "contract",
      //   getValueOrDefault(
      //     formElement.querySelector('select[name="contract"]').value
      //   )
      // );

      formData.append(
        "female_skilled",
        getValueOrDefault(
          formElement.querySelector('input[name="female_skilled"]').value
        )
      );
      formData.append(
        "female_unskilled",
        getValueOrDefault(
          formElement.querySelector('input[name="female_unskilled"]').value
        )
      );

      formData.append(
        "maistry_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="maistry_ot"]').value
        )
      );
      formData.append(
        "maison_cooli_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="maison_cooli_ot"]').value
        )
      );
      formData.append(
        "male_skilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="male_skilled_ot"]').value
        )
      );
      formData.append(
        "male_unskilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="male_unskilled_ot"]').value
        )
      );
      formData.append(
        "female_skilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="female_skilled_ot"]').value
        )
      );
      formData.append(
        "female_unskilled_ot",
        getValueOrDefault(
          formElement.querySelector('input[name="female_unskilled_ot"]').value
        )
      );

      requiredKeys.forEach(function (key) {
        var value = formData.get(key);
        if (!value.trim()) {
          isValid = false;
          errors[`${key}`] = ["This field may not be blank."];
        }
      });

      if (!isValid) {
        enableButton(button);
        handleCreateErrors(errors,pre='V');
        // handleUpdateErrors(saveId, transformErrors(errors));
        return;
      } else {
        $(`#${formId} input, #${formId} button`).prop("disabled", true);
      }

      console.log(csrftoken);
      $.ajax({
        url: "/update_attendancereport/" + saveId + "/", //change
        type: "PUT",
        headers: {
          "X-CSRFToken": csrftoken,
        },
        processData: false,
        contentType: false,
        data: formData,
        success: function (response, status, xhr) {
          if (xhr.status === 200) {
            showToast(updateMessage?.message, "", updateMessage?.bgColor);
            fetchData(currentPage, reload = true)
            closeHistoryModal(modalSelector)
            restoreForm(formId, button);
          } else {
            showToast(
              errorAlertMessage?.message,
              "",
              errorAlertMessage?.bgColor
            );
            restoreForm(formId, button);
          }
        },
        error: function (xhr, status, error) {
          console.log(xhr, status, error);
          if (xhr.status === 400) {
            if (xhr?.responseJSON || xhr?.responseJSON?.errors) {
              showToast(
                errorAlertMessage?.message,
                "",
                errorAlertMessage?.bgColor
              );
              handleCreateErrors(transformErrors(xhr.responseJSON),pre='V');
              // handleUpdateErrors(saveId, transformErrors(xhr.responseJSON));
              restoreForm(formId, button);
            } else {
              showToast(
                errorAlertMessage?.message,
                "",
                errorAlertMessage?.bgColor
              );
              restoreForm(formId, button);
            }
          } else if (xhr.status === 401 || xhr.status ===404) {
            showToast(
              xhr?.responseJSON?.details,
              "",
              errorAlertMessage?.bgColor
            );
            restoreForm(formId, button);
          } else {
            showToast(
              errorAlertMessage?.message,
              "",
              errorAlertMessage?.bgColor
            );
            restoreForm(formId, button);
          }
        },
      });
    } catch (error) {
      showToast(errorOccured?.message, "", errorOccured?.bgColor);
      restoreForm(formId, button);
      console.error(error);
    }
  }

  function deleteFunction(button, saveId) {
    try {
      disableButton(button);

      $.ajax({
        url: "/delete_attendancereport/" + saveId + "/",
        type: "DELETE",
        headers: {
          "X-CSRFToken": csrftoken,
        },
        processData: false,
        contentType: false,
        success: function (response, status, xhr) {
          if (xhr.status === 204) {
            showToast(deleteMessage?.message, "", deleteMessage?.bgColor, true);
            enableButton(button);
          } else {
            showToast(
              errorAlertMessage?.message,
              "",
              errorAlertMessage?.bgColor
            );
            enableButton(button);
          }
        },
        error: function (xhr, status, error) {
          console.log(xhr, status, error);
          if (xhr.status === 400) {
            if (xhr?.responseJSON || xhr?.responseJSON?.errors) {
              showToast(
                xhr?.responseJSON?.details,
                "",
                errorAlertMessage?.bgColor
              );
              enableButton(button);
            } else {
              showToast(
                errorAlertMessage?.message,
                "",
                errorAlertMessage?.bgColor
              );
              enableButton(button);
            }
          } else if (xhr.status === 401 || 404) {
            showToast(
              xhr?.responseJSON?.details,
              "",
              errorAlertMessage?.bgColor
            );
            enableButton(button);
          } else {
            showToast(
              errorAlertMessage?.message,
              "",
              errorAlertMessage?.bgColor
            );
            enableButton(button);
          }
        },
      });
    } catch (error) {
      showToast(errorOccured?.message, "", errorOccured?.bgColor);
      console.error(error);
    }
  }

</script>


<script>

  let activePage;

  const existingPaginationContainer = document.getElementById(
    "pagination-container"
  );

  const dropdown = document.getElementById("contractor");
  const projdropdown = document.getElementById("project");
  const tableBody = document.querySelector("#example tbody");

  // from and to
  const fromdate = document.getElementById("fromdate");
  const todate = document.getElementById("todate");

  // tablemodal
  // const modalTableBody = document.getElementById('modalTableBody');
  // const submodalTableBody = document.getElementById('submodalTableBody');

  const modalfromdate = document.getElementById("fromdate");
  const modaltodate = document.getElementById("todate");

  var qtyError = false;

  var priceError = false;

  var currentPage = 1;

  document.addEventListener("DOMContentLoaded", function () {
    // const dropdown = document.getElementById('fromsite');
    // const tableBody = document.querySelector('#example tbody');

    // on dom loaded
    const initialSelectedValue = dropdown?.value;
    fetchData(1);



 

    // fetch table data API
    dropdown.addEventListener("change", function () {
      activePage = null;
      fetchData(currentPage);
    });

   

    projdropdown.addEventListener("change", function () {
      activePage = null;
      fetchData(currentPage);
    });

    todate.addEventListener("change", function () {
      activePage = null;
      fetchData(currentPage);
    });

    fromdate.addEventListener("change", function () {
      activePage = null;
      fetchData(currentPage);
    });


    // view and edit form
    const modalElement = document.getElementById('attendanceHistoryModal');
    const form = document.getElementById('editForm');
    const editButton = document.getElementById('editButton');
    const saveButton = document.getElementById('saveButton');


    const readOnlyFields = ['contract','date'];
    const readOnlyValue = 'Read Only Value';

    // Hide the Save button initially
    saveButton.classList.add('d-none');

    editButton.addEventListener('click', function () {
      toggleFormEditing(form, readOnlyFields, readOnlyValue, true);
      editButton.classList.add('d-none');
      saveButton.classList.remove('d-none');

    });

    // Add event listener to Save button
    saveButton.addEventListener('click', function () {
      // Logic to save the form data
      toggleFormEditing(form, readOnlyFields, readOnlyValue, false);
      saveButton.classList.add('d-none');
      editButton.classList.remove('d-none');


    });
    console.log(attendanceHistoryModal)

    modalElement.addEventListener('hidden.bs.modal', function () {
      // Reset form editing state
      toggleFormEditing(form, readOnlyFields, readOnlyValue, false);
      saveButton.classList.add('d-none');
      editButton.classList.remove('d-none');
    });



  });





  // fetch data
  function fetchData(page) {
    currentPage = page;
    const selectedValue = projdropdown.value;
    const from = fromdate?.value || "";
    const to = todate?.value || "";
    const contractor = dropdown?.value || "";
    console.log(fromdate, todate);
    try {
      fetch(
        `/attendancelist/${selectedValue}/?page=${page}&start_date=${from}&end_date=${to}&contarctor=${contractor}`
      ) //CHANGE URL
        .then((response) => {
          if (response.status === 200) {
            console.log("Data fetched");
            return response.json();
          } else if (response.status === 404) {
            throw new Error("Resource not found");
          } else if (response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          } else {
            throw new Error("Network response was not ok");
          }
        })
        .then((data) => {
          tableBody.innerHTML = "";
          renderDataOrMessage(tableBody, data, page);
        })
        .catch((error) => {
          console.error("Error fetching data:", error);
          showToast(errorAlertMessage?.message, "", errorAlertMessage?.bgColor);
        });
    } catch (error) {
      console.error("Error in fetch operation:", error);
    }
  }

  // render table or message

  function renderDataOrMessage(tableBody, data, page) {
    // Check if data is available and not empty
    if (data && Array.isArray(data.results) && data.results.length > 0) {
      // Render the data in the table

      tdata = data?.results;

      tdata.forEach((item, index) => {
        const newRow = createTableRow(index + 1, item);
        tableBody.appendChild(newRow);
      });

      renderPagination(data, page);
    } else {
      // Display a message indicating no data available
      tableBody.innerHTML = '<tr><td colspan="6">No data available.</td></tr>';

      existingPaginationContainer.innerHTML = ""; // Clear existing content
    }
  }

  // MANIPULATE TABLE DATA
  function createTableRow(serialNumber, data) {
    const newRow = document.createElement("tr");
    newRow.setAttribute("data-item-id", data.id);

    //seriaal number
    const td1 = document.createElement("td");
    td1.textContent = serialNumber;
    newRow.appendChild(td1);

    // date
    const td2 = document.createElement("td");
    td2.textContent = get_value(data.date);
    newRow.appendChild(td2);

    // particular
    const td3 = document.createElement("td");
    td3.textContent = get_value(data.contractor_name);
    newRow.appendChild(td3);

    // From amount
    const td4 = document.createElement("td");
    td4.textContent = get_value(data.maistry);
    newRow.appendChild(td4);

    // From amount
    const td5 = document.createElement("td");
    td5.textContent = get_value(data.maison_cooli);
    newRow.appendChild(td5);

    const td6 = document.createElement("td");
    td6.textContent = get_value(data.male_skilled);
    newRow.appendChild(td6);

    const td7 = document.createElement("td");
    td7.textContent = get_value(data.male_unskilled);
    newRow.appendChild(td7);

    const td8 = document.createElement("td");
    td8.textContent = get_value(data.female_skilled);
    newRow.appendChild(td8);

    const td9 = document.createElement("td");
    td9.textContent = get_value(data.female_unskilled);
    newRow.appendChild(td9);


    const actioncell = document.createElement('td');


    actioncell.innerHTML = `	<button class="btn btn-soft-secondary btn-sm dropdown" type="button"  onclick="openCustomDataModal('attendanceHistoryModal')" >
                                    <i class="ri-eye-fill align-middle"></i>
                                    </button>
                                    `

    newRow.appendChild(actioncell);



    actioncell.addEventListener('click', () => {

      populateModalData(data)
    });

    return newRow;
  }


  function populateModalData(data) {

    const modalheader =document.getElementById('modalHeader')

    modalheader.innerText= `${data.contractor_name} details`


    const form = document.getElementById('editForm');
    if (!form) {
      console.error("Form element not found.");
      return;
    }

    setModalInputValue(form, 'contract', data.contractor_name);
    setModalInputValue(form, 'contractHidden', data.id);
    setModalInputValue(form, 'date', data.date);
    setModalInputValue(form, 'maistry', data.maistry);
    setModalInputValue(form, 'maison_cooli', data.maison_cooli);
    setModalInputValue(form, 'male_skilled', data.male_skilled);
    setModalInputValue(form, 'male_unskilled', data.male_unskilled);
    setModalInputValue(form, 'female_skilled', data.female_skilled);
    setModalInputValue(form, 'female_unskilled', data.female_unskilled);
    setModalInputValue(form, 'maison_cooli_ot', data.maison_cooli_ot);
    setModalInputValue(form, 'maistry_ot', data.maistry_ot);
    setModalInputValue(form, 'male_skilled_ot', data.male_skilled_ot);
    setModalInputValue(form, 'male_unskilled_ot', data.male_unskilled_ot);
    setModalInputValue(form, 'female_skilled_ot', data.female_skilled_ot);
    setModalInputValue(form, 'female_unskilled_ot', data.female_unskilled_ot);

    const saveButton = form.querySelector('#saveButton');
    if (saveButton) {
      saveButton.setAttribute("data-id", data.atten_id);
    } else {
      console.error("Save button not found in the form.");
    }

  }





  // -----------------------------> List Show ^^^^^^^^^^^^^^^^^^^^^^^^^


  // close modal
  function closeHistoryModal(modalId) {
    var myModal = new bootstrap.Modal(document.getElementById(modalId));
    myModal.hide();
  }












</script>


{% endblock header2 %}