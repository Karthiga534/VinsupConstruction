{% extends "base.html" %}

{% load static %}

{% block header2 %}

    <!-- Begin page -->
    <div id="layout-wrapper">

        <div class="main-content">

            <div class="page-content">
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                                <h4 class="mb-sm-0">City</h4>

                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Dashboard</a></li>
                                        <li class="breadcrumb-item active">city</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->
                    
					<!-- end page title 

                    <div class="alert alert-danger" role="alert">
                        This is <strong>Datatable</strong> page in wihch we have used <b>jQuery</b> with cnd link!
                    </div> -->

                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">
                                    
									<div class="row">
									<div class="col-xl-6 col-lg-6 col-md-6 col-12">
										<h2>City Management </h2>
									</div>
									<div class="col-xl-4 col-lg-4 col-md-4 col-12"></div>
									<div class="col-xl-2 col-lg-2 col-md-2 col-12">
										<button type="button" class="btn btn-info" style="float:right;" data-bs-toggle="modal" data-bs-target=".bs-example-modal-lg">Add city</button>
										<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
											<div class="modal-dialog modal-lg">
												<div class="modal-content">
													<div class="modal-header">
														<h5 class="modal-title" id="myLargeModalLabel">City Name</h5>
														<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
														</button>
													</div>
													<hr>
                                                    <form action="{% url 'addcity' %}" method="post">
                                                        {% csrf_token %}
													<div class="modal-body">
														<div class="row">
															<div class="col-md-6">
                                                                <label for="district" class="form-label">District Name:</label>
                                                                <select class="form-select mb-3" aria-label="Default select example" id="district" name="district">
                                                                    {% for district in districts %}
                                                                        <option value="{{ district.id }}">{{ district.name }}</option>
                                                                    {% endfor %}	
                                                                </select>
                                                            </div>
															<div class="col-md-6">
																<label for="" class="form-label">City Name :</label>
																<input type="text" name="name" class="form-control" id="">
															</div>
															<div class="col-md-6">
																<label for="" class="form-label">Description :</label>
																<input type="text" name="description" class="form-control" id="">
															</div>
															
														</div>
													</div><hr>
													<div class="modal-footer">
														<button class="btn btn-link link-success fw-medium shadow-none" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
														<button type="submit" class="btn btn-primary ">Save </button>
													</div>
                                                </form>
												</div>
												<!-- /.modal-content -->
											</div>
											<!-- /.modal-dialog -->
										</div>
									</div>
								</div>
                                </div>
                                <div class="card-body">
                                    <table id="example" class="table table-bordered dt-responsive nowrap table-striped align-middle" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th scope="col" style="width: 10px;">
                                                    <div class="form-check">
                                                        <input class="form-check-input fs-15" type="checkbox" id="checkAll" value="option">
                                                    </div>
                                                </th>
                                                <th data-ordering="false">SR No.</th>
                                                <th data-ordering="false">District Name</th>
                                                <th data-ordering="false">City Name</th>
                                                <th data-ordering="false">Description</th>
                                                
                                                <th data-ordering="false">Action</th>
                                                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for i in city %}
                                            <tr>
                                                <th scope="row">
                                                    <div class="form-check">
                                                        <input class="form-check-input fs-15" type="checkbox" name="checkAll" value="option1">
                                                    </div>
                                                </th>
                                                <td>{{ forloop.counter }}</td>
                                                <td>{{ i.district.name }}</td>
                                                <td>{{ i.name }}</td>
                                                <td>{{ i.description }}</td>
                                                
                                                {% comment %} <td>
                                                    <div class="dropdown d-inline-block">
                                                        <button class="btn btn-soft-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                            <i class="ri-more-fill align-middle"></i>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-end">
                                                            <li><a href="#!" class="dropdown-item"><i class="ri-eye-fill align-bottom me-2 text-muted"></i> View</a></li>
                                                            <li><a class="dropdown-item edit-item-btn"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i> Edit</a></li>
                                                            <li>
                                                                <a class="dropdown-item remove-item-btn">
                                                                    <i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i> Delete
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td> {% endcomment %}
                                                <td>
                                                    <div class="dropdown d-inline-block">
                                                        <button class="btn btn-soft-secondary btn-sm dropdown" type="button" data-bs-toggle="dropdown" aria-expanded="false" >
                                                           <i class="ri-more-fill align-middle"></i>
                                                        </button>
                                                        <ul class="dropdown-menu dropdown-menu-end">
                                                            <li>
                                                                <a href="#!" class="dropdown-item" data-bs-toggle="modal" data-bs-target="#viewModal-{{ forloop.counter }}" >
                                                                    <i class="ri-eye-fill align-bottom me-2 text-muted" ></i> View
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a href="#!" class="dropdown-item edit-item-btn" data-bs-toggle="modal" data-bs-target="#editModal-{{ forloop.counter }}" >
                                                                    <i class="ri-pencil-fill align-bottom me-2 text-muted" ></i>  Edit
                                                                </a>
                                                            </li>
                                                            <li>
                                                                <a href="#!" class="dropdown-item remove-item-btn" data-bs-toggle="modal" data-bs-target="#deleteModal-{{ forloop.counter }}" >
                                                                    <i class="ri-delete-bin-fill align-bottom me-2 text-muted" ></i> Delete
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="modal fade" id="viewModal-{{ forloop.counter }}" tabindex="-1" aria-labelledby="viewModalLabel-{{ forloop.counter }}" aria-hidden="true" >
                                                        <div class="modal-dialog modal-lg">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="viewModalLabel-{{ forloop.counter }}" > View City </h5>
                                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                            <label for="viewDistrictName-{{ forloop.counter }}" class="form-label" >District Name:</label >
                                                                            <input type="text" class="form-control" id="viewDistrictName-{{ forloop.counter }}" value="{{ i.district.name }}"  readonly />
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <label for="viewCityName-{{ forloop.counter }}" class="form-label" >City Name:</label >
                                                                            <input type="text" class="form-control" id="viewCityName-{{ forloop.counter }}" value="{{ i.name }}"  readonly />
                                                                        </div>
                                                                        <div class="col-md-6">
                                                                            <label for="viewCityDescription-{{ forloop.counter }}" class="form-label" >Description:</label >
                                                                            <input type="text" class="form-control" id="viewCityDescription-{{ forloop.counter }}" value="{{ i.description }}" readonly />
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" > Close </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal fade bs-example-modal-lg" id="editModal-{{ forloop.counter }}" tabindex="-1" role="dialog" aria-labelledby="editModalLabel-{{ forloop.counter }}" aria-hidden="true" >
                                                        <!-- Edit Modal content -->
                                                        <div class="modal-dialog modal-lg">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="editModalLabel-{{ forloop.counter }}" > Edit City </h5>
                                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ></button>
                                                                </div>
                                                                <form action="/updatecity/{{ i.id }}" method="post">
                                                                    {% csrf_token %}
                                                                    <div class="modal-body">
                                                                        <div class="row">
                                                                            <div class="col-md-6">
                                                                                <label for="districtName-{{ forloop.counter }}" class="form-label">District Name:</label>
                                                                                <input type="text" class="form-control" id="districtName-{{ forloop.counter }}" name="district_name" value="{{ i.district.name }}" />
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <label for="cityName-{{ forloop.counter }}" class="form-label">City Name:</label>
                                                                                <input type="text" class="form-control" id="cityName-{{ forloop.counter }}" name="city_name" value="{{ i.name }}" />
                                                                            </div>
                                                                            <div class="col-md-6">
                                                                                <label for="cityDescription-{{ forloop.counter }}" class="form-label">Description:</label>
                                                                                <input type="text" class="form-control" id="cityDescription-{{ forloop.counter }}" name="description" value="{{ i.description }}" />
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button class="btn btn-link link-success fw-medium shadow-none" data-bs-dismiss="modal">
                                                                            <i class="ri-close-line me-1 align-middle"></i> Close
                                                                        </button>
                                                                        <button type="submit" value="updatecity" class="btn btn-primary">Save</button>
                                                                    </div>
                                                                </form>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal fade" id="deleteModal-{{ forloop.counter }}" tabindex="-1" aria-labelledby="deleteModalLabel-{{ forloop.counter }}" aria-hidden="true" >
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="deleteModalLabel-{{ forloop.counter }}" > Delete City </h5>
                                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" ></button>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <p> Are you sure you want to delete "{{ i.name }}"? </p>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" > Cancel </button>
                                                                    <form action="/deletecity/{{ i.id }}" method="post" >
                                                                        {% csrf_token %}
                                                                        <button type="submit" class="btn btn-danger">Delete</button>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            
                                                                        
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
<!-- container-fluid -->
            </div>
            <!-- End Page-content -->

          
        </div>
        <!-- end main content-->

    </div>
    <!-- END layout-wrapper -->



    <!--start back-to-top-->
    <button onclick="topFunction()" class="btn btn-danger btn-icon" id="back-to-top">
        <i class="ri-arrow-up-line"></i>
    </button>
    <!--end back-to-top-->

    <!--preloader-->
    <div id="preloader">
        <div id="status">
            <div class="spinner-border text-primary avatar-sm" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>

    {% endblock header2 %}